!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("angular6-social-button",["exports","@angular/core","rxjs","@angular/platform-browser"],e):e(o["angular6-social-button"]={},o.ng.core,o.rxjs,o.ng.platformBrowser)}(this,function(o,t,e,n){"use strict";var i=function(o,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t])})(o,e)};function r(o,e){function t(){this.constructor=o}i(o,e),o.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var a=function(){function o(){}return o.prototype.loadScript=function(o,e){if(!document.getElementById(o.name)){var t=document.createElement("script");t.async=!0,t.src=o.url,t.onload=e,"linkedin"===o.name&&(t.async=!1,t.text=("api_key: "+o.id).replace("'","")),document.head.appendChild(t)}},o}(),s=function x(){},c=function m(){},u=function(t){function n(o){var e=t.call(this)||this;return e.clientId=o,e.TYPE="facebook",e.loginProviderObj=new c,e.loginProviderObj.id=o,e.loginProviderObj.name="facebook",e.loginProviderObj.url="https://connect.facebook.net/en_US/sdk.js",e}return r(n,t),n.prototype.initialize=function(){var e=this;return new Promise(function(t,o){e.loadScript(e.loginProviderObj,function(){FB.init({appId:e.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView(),FB.getLoginStatus(function(o){if("connected"===o.status){var e=FB.getAuthResponse().accessToken;FB.api("/me?fields=name,email,picture",function(o){t(n.drawUser(Object.assign({},{token:e},o)))})}})})})},n.drawUser=function(o){var e=new s;return e.id=o.id,e.name=o.name,e.email=o.email,e.accessToken=o.accessToken,e.image="https://graph.facebook.com/"+o.id+"/picture?type=normal",e},n.prototype.signIn=function(e){return new Promise(function(t,o){FB.login(function(o){if(console.log("facebook",o),o.authResponse){var e=FB.getAuthResponse().accessToken;FB.api("/me?fields=name,email,picture",function(o){console.log("me",o),t(n.drawUser(Object.assign({},{accessToken:e},o)))})}},{scope:e&&0<e.length?e.join(","):"email,public_profile"})})},n.prototype.sharing=function(t){return new Promise(function(o,e){console.log("sharing",t),FB.ui({method:"share",href:t.href,hashtag:t.hashtag&&0<=t.hashtag.indexOf("#")?t.hashtag:null},function(o){console.log(o)})})},n.prototype.signOut=function(){return new Promise(function(e,o){FB.logout(function(o){e()})})},n.PROVIDER_TYPE="facebook",n.SCOPES={EMAIL:"email",PUBLIC_PROFILE:"public_profile"},n}(a),p=function(t){function o(o){var e=t.call(this)||this;return e.clientId=o,e.loginProviderObj=new c,e.TYPE="google",e.loginProviderObj.id=o,e.loginProviderObj.name="google",e.loginProviderObj.url="https://apis.google.com/js/platform.js",e}return r(o,t),o.prototype.initialize=function(){var t=this;return new Promise(function(o,e){t.loadScript(t.loginProviderObj,function(){gapi.load("auth2",function(){t.auth2=gapi.auth2.init({client_id:t.clientId,scope:"email"}),t.auth2.then(function(){t.auth2.isSignedIn.get()&&o(t.drawUser())})})})})},o.prototype.drawUser=function(){var o=new s,e=this.auth2.currentUser.get().getBasicProfile(),t=this.auth2.currentUser.get().getAuthResponse(!0);return o.id=e.getId(),o.name=e.getName(),o.email=e.getEmail(),o.image=e.getImageUrl(),o.accessToken=t.access_token,o.idToken=t.id_token,o},o.prototype.signIn=function(o){var t=this;return new Promise(function(o,e){t.auth2.signIn().then(function(){o(t.drawUser())})["catch"](function(o){e(o)})})},o.prototype.signOut=function(){var o=this;return new Promise(function(e,t){o.auth2.signOut().then(function(o){o?t(o):e()})})},o.prototype.sharing=function(o){return new Promise(function(o,e){o()})},o.PROVIDER_TYPE="google",o}(a),l=function(){function o(o){if(this.providers=new Map,o)for(var e=0;e<o.length;e++){var t=o[e];this.providers.set(t.provider.TYPE,t.provider)}}return o.prototype.getProviders=function(){return this.providers},o.prototype.addProvider=function(o){this.providers.get(o.TYPE)||this.providers.set(o.TYPE,o)},o.prototype.addFacebook=function(o){return this.addProvider(new u(o)),this},o.prototype.addGoogle=function(o){return this.addProvider(new p(o)),this},o}(),g=function(){function a(o){var t=this;this._user=null,this._authState=new e.BehaviorSubject(null),this.providers=o.getProviders(),this.providers.forEach(function(o,e){o.initialize().then(function(o){o.provider=e,t._user=o,t._authState.next(o)})["catch"](function(o){})})}return Object.defineProperty(a.prototype,"authState",{get:function(){return this._authState.asObservable()},enumerable:!0,configurable:!0}),a.prototype.isSocialLoggedIn=function(){return console.log(this._user),null!=this._user},a.prototype.facebookSharing=function(n){var i=this;return new Promise(function(o,e){var t=i.providers.get("facebook");t?t.sharing(n).then(function(){o(!0)}):e(a.LOGIN_PROVIDER_NOT_FOUND)})},a.prototype.signIn=function(n,i){var r=this;return new Promise(function(e,t){var o=r.providers.get(n);o?o.signIn(i).then(function(o){o.provider=n,e(o),r._user=o,r._authState.next(o)})["catch"](function(o){t(a.USER_POPUP_CLOSE)}):t(a.LOGIN_PROVIDER_NOT_FOUND)})},a.prototype.signOut=function(){var n=this;return new Promise(function(o,e){if(n._user&&n._user.provider){var t=n._user.provider;n.providers.get(t).signOut().then(function(){n._user=null,n._authState.next(null),o()})["catch"](function(o){n._authState.next(null)})}else e(a.LOGIN_PROVIDER_NOT_FOUND)})},a.LOGIN_PROVIDER_NOT_FOUND="Login provider not found",a.USER_POPUP_CLOSE="User close the popup",a.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[{type:l}]},a.ngInjectableDef=t.defineInjectable({factory:function(){return new a(t.inject(l))},token:a,providedIn:"root"}),a}(),d=function(){function o(o){this.socialAuthService=o,this.socialUser=new t.EventEmitter}return o.prototype.ngOnInit=function(){},o.prototype.socialSignIn=function(){var e=this;this.socialAuthService.signIn("facebook",this.scopes).then(function(o){console.log("socialSignIn",o),e.socialUser.emit(o)})["catch"](function(){e.socialUser.emit(null)})},o.decorators=[{type:t.Component,args:[{selector:"facebook-login-button",template:'\n      <button class="button btn-block loginBtn --facebook" \n              (click)="socialSignIn()" type="button">\n          Login with Facebook</button>\n  ',styles:['.button{font-family:Lato,"Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;-webkit-appearance:none;display:inline-block;outline:0;border-radius:3px;border:3px solid transparent;cursor:pointer;text-overflow:ellipsis;text-decoration:none!important;font-weight:400!important}.loginBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.loginBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.loginBtn:focus{outline:0}.loginBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.shareBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.shareBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.shareBtn:focus{outline:0}.shareBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.--facebook{background-color:#4c69ba;background-image:linear-gradient(#4c69ba,#3b55a0);text-shadow:0 -1px 0 #354c8c}.--facebook:before{border-right:1px solid #364e92;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png) 6px 6px no-repeat}.--facebook:focus,.--facebook:hover{background-color:#5b7bd5;background-image:linear-gradient(#5b7bd5,#4864b1)}.--google{background:#dd4b39}.--google:before{border-right:1px solid #bb3f30;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png) 6px 6px no-repeat}.--google:focus,.--google:hover{background:#e74b37}']}]}],o.ctorParameters=function(){return[{type:g}]},o.propDecorators={size:[{type:t.Input}],scopes:[{type:t.Input}],socialUser:[{type:t.Output}]},o}(),f=function(){function o(o){this.socialAuthService=o,this.socialUser=new t.EventEmitter}return o.prototype.ngOnInit=function(){},o.prototype.socialSignIn=function(){var e=this;this.socialAuthService.signIn("google",this.scopes).then(function(o){e.socialUser.emit(o)})["catch"](function(){e.socialUser.emit(null)})},o.decorators=[{type:t.Component,args:[{selector:"google-login-button",template:'\n      <button class="btn-block loginBtn --google" \n              (click)="socialSignIn()" type="button">\n          Login with Google\n      </button>\n  ',styles:['.button{font-family:Lato,"Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;-webkit-appearance:none;display:inline-block;outline:0;border-radius:3px;border:3px solid transparent;cursor:pointer;text-overflow:ellipsis;text-decoration:none!important;font-weight:400!important}.loginBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.loginBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.loginBtn:focus{outline:0}.loginBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.shareBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.shareBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.shareBtn:focus{outline:0}.shareBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.--facebook{background-color:#4c69ba;background-image:linear-gradient(#4c69ba,#3b55a0);text-shadow:0 -1px 0 #354c8c}.--facebook:before{border-right:1px solid #364e92;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png) 6px 6px no-repeat}.--facebook:focus,.--facebook:hover{background-color:#5b7bd5;background-image:linear-gradient(#5b7bd5,#4864b1)}.--google{background:#dd4b39}.--google:before{border-right:1px solid #bb3f30;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png) 6px 6px no-repeat}.--google:focus,.--google:hover{background:#e74b37}']}]}],o.ctorParameters=function(){return[{type:g}]},o.propDecorators={size:[{type:t.Input}],scopes:[{type:t.Input}],socialUser:[{type:t.Output}]},o}(),b=function(){function o(o,e){this.socialAuthService=o,this.document=e,this.share=null,this.response=new t.EventEmitter}return o.prototype.ngOnInit=function(){},o.prototype.sharing=function(){var e=this;console.log(this.document.location.href),this.share?this.share.href||(this.share.href=this.document.location.href):this.share={href:this.document.location.href},this.socialAuthService.facebookSharing(this.share).then(function(){e.response.emit(!0)})["catch"](function(o){e.response.emit(!1)})},o.decorators=[{type:t.Component,args:[{selector:"facebook-share-button",template:'\n      <button class="button btn-block loginBtn --facebook" \n              (click)="sharing()" type="button">Share</button>\n  ',styles:['.button{font-family:Lato,"Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;-webkit-appearance:none;display:inline-block;outline:0;border-radius:3px;border:3px solid transparent;cursor:pointer;text-overflow:ellipsis;text-decoration:none!important;font-weight:400!important}.loginBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.loginBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.loginBtn:focus{outline:0}.loginBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.shareBtn{box-sizing:border-box;position:relative;margin:.2em;padding:0 15px 0 46px;border:none;text-align:left;line-height:34px;white-space:nowrap;border-radius:3px;font-size:16px;color:#fff}.shareBtn:before{content:"";box-sizing:border-box;position:absolute;top:0;left:0;width:34px;height:100%}.shareBtn:focus{outline:0}.shareBtn:active{box-shadow:inset 0 0 0 32px rgba(0,0,0,.1)}.--facebook{background-color:#4c69ba;background-image:linear-gradient(#4c69ba,#3b55a0);text-shadow:0 -1px 0 #354c8c}.--facebook:before{border-right:1px solid #364e92;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png) 6px 6px no-repeat}.--facebook:focus,.--facebook:hover{background-color:#5b7bd5;background-image:linear-gradient(#5b7bd5,#4864b1)}.--google{background:#dd4b39}.--google:before{border-right:1px solid #bb3f30;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png) 6px 6px no-repeat}.--google:focus,.--google:hover{background:#e74b37}']}]}],o.ctorParameters=function(){return[{type:g},{type:undefined,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]},o.propDecorators={share:[{type:t.Input}],response:[{type:t.Output}]},o}(),h=function(){function o(){}return o.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[d,f,b],exports:[d,f,b]}]}],o}();o.SocialServiceConfig=l,o.SocialService=g,o.FacebookLoginProvider=u,o.GoogleLoginProvider=p,o.FacebookLoginButton=d,o.GoogleLoginButton=f,o.FacebookSharingButton=b,o.Angular6SocialButtonModule=h,o.ɵa=a,Object.defineProperty(o,"__esModule",{value:!0})});
//# sourceMappingURL=angular6-social-button.umd.min.js.map