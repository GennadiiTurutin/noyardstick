!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-disqus",["exports","@angular/core","@angular/common"],t):t(e["ngx-disqus"]={},e.ng.core,e.ng.common)}(this,function(e,i,t){"use strict";var n=new i.InjectionToken("DISQUS_SHORTNAME"),r=function(){function e(e,t){this.shortname=e,this._document=t}return Object.defineProperty(e.prototype,"DISQUS",{get:function(){return this._document.defaultView.DISQUS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disqus_config",{get:function(){return this._document.defaultView.disqus_config},set:function(e){this._document.defaultView.disqus_config=e},enumerable:!0,configurable:!0}),e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:String,decorators:[{type:i.Inject,args:[n]}]},{type:undefined,decorators:[{type:i.Inject,args:[t.DOCUMENT]}]}]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(n),i.inject(t.DOCUMENT))},token:e,providedIn:"root"}),e}(),o=function(){function e(e,t,n){this.renderer=e,this.el=t,this.dService=n,this.newComment=new i.EventEmitter(!0),this.ready=new i.EventEmitter(!0),this.paginate=new i.EventEmitter(!0)}return e.prototype.ngOnChanges=function(){this.dService.DISQUS?this.reset():this.addDisqusScript()},e.prototype.addDisqusScript=function(){this.dService.disqus_config=this.getConfig();var e=this.renderer.createElement("script");e.src="//"+this.dService.shortname+".disqus.com/embed.js",e.async=!0,e.type="text/javascript",this.renderer.setAttribute(e,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,e)},e.prototype.reset=function(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})},e.prototype.getConfig=function(){var t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[function(e){t.newComment.emit(e)}],this.callbacks.onReady=[function(e){t.ready.emit(e)}],this.callbacks.onPaginate=[function(e){t.paginate.emit(e)}]}},e.prototype.validateUrl=function(e){if(e){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return e;console.warn("[Disqus]: Invalid URL")}return undefined},e.decorators=[{type:i.Component,args:[{selector:"disqus",template:'<div id="disqus_thread"></div>',changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.Renderer2},{type:i.ElementRef},{type:r}]},e.propDecorators={url:[{type:i.Input}],identifier:[{type:i.Input}],title:[{type:i.Input}],category:[{type:i.Input}],language:[{type:i.Input}],newComment:[{type:i.Output}],ready:[{type:i.Output}],paginate:[{type:i.Output}]},e}(),s=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:n,useValue:e}]}},t.decorators=[{type:i.NgModule,args:[{declarations:[o],exports:[o]}]}],t}();e.DisqusModule=s,e.DISQUS_SHORTNAME=n,e.DisqusService=r,e.Éµa=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-disqus.umd.min.js.map